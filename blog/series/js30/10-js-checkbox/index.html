<!DOCTYPE html>
<html lang="en">
<head>
    
  
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="alternate" href="/rss.xml" type="application/rss+xml" title="RSS">
        <link rel="icon" type="image/x-icon" href="/assets/img/dd-logo.ico">
        <link rel="shortcut icon" type="img/ico" href="/assets/img/dd-logo.ico">
        <link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" rel="stylesheet">
        <link rel="stylesheet" href="/css/vendor/normalize.css">
        <link rel="stylesheet" href="/css/vendor/grid.css">
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/queries.css">
        <meta property="og:title" content="DiscoverDev | Daily digest of engineering blog posts for software developers" />
        <meta property="og:image" content="https://i.lensdump.com/i/uYTND.png" />
        <title>Discover dev</title>
        <script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-102291280-1', 'auto');
              ga('send', 'pageview');

        </script>
    
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://discoverdev.io/blog/series/js30/10-js-checkbox" />
  <meta property="og:description" content="This is the tenth project of WesBos's JS30 series. We'll be building a gmail style "hold shift and check all" items type list. You can check any element in the list, then hold shift and check another element, and all the elements in between should also get checked.
" />
  <link rel="stylesheet" href="/css/blog-post.css">
  <link rel="stylesheet" href="/css/blog-mail.css">
  <link rel="stylesheet" href="/css/blog-md.css">
  <link rel="stylesheet" href="/css/code-highlight.css">

</head>

<body>
<header class="clearfix">
  
    <div class="logo"><a href="/"><img src="/assets/img/dd-logo-and-text.svg" alt=""></a> </div>
    <nav>
        <ul>
        <li><a href="/tags/">/tags</a></li>
        <li><a href="/archive.html">/archive</a></li>
        <li><a href="/about.html">/about</a></li>
        <li><a href="/blog" class="blog-btn">Blog</a></li>
        <li><a href="/subscribe.html" class="highlight">/Subscribe</a></li>
        </ul>
    </nav>
  
</header>


<main>
<div class="bpost-wrapper clearfix">
  
  <article class="bpost-content">
    <header><h1 class="bpost-title">JS Checkbox</h1></header>
    <!-- Probably date and author card here -->

    <section class="md-content-render">
      <p>This is the tenth project of WesBos's <a href="https://javascript30.com/friend/DISCOVERDEV">JS30 series</a>. To see the <strong>whole 30 part series</strong>, <a href="../">click here</a>
We'll be building a gmail style "hold shift and check all" items type list. You can check any element in the list, then hold shift and check another element, and all the elements in between should also get checked.</p>

<p>Check out the video here </p>

<p><style>.embed-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; } .embed-container iframe, .embed-container object, .embed-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }</style><div class='embed-container'><iframe src='https://www.youtube.com/embed/RIPYsKx1iiU' frameborder='0' allowfullscreen></iframe></div></p>

<p>The starter code</p>

<iframe height='465' scrolling='no' title='JS30-10-select-checkbox-a' src='//codepen.io/deepakkarki/embed/WyzZzy/?height=265&theme-id=dark&default-tab=html,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/deepakkarki/pen/WyzZzy/'>JS30-10-select-checkbox-a</a> by Deepak Karki (<a href='https://codepen.io/deepakkarki'>@deepakkarki</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>

<p>We won't be touching the HTML or CSS in this project, but just have a look anyway, the structure is straightforward. </p>

<p>The HTML is primarily a <code>div.inbox</code> with <code>div.item</code> as children. Each item has an checkbox <code>&lt;input&gt;</code> and a <code>&lt;p&gt;</code> element.</p>

<div class="codehilite"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inbox&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;item&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is an inbox layout.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;item&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Check one item<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  ... <span class="c">&lt;!-- more items --&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

<p>Clicking on the checkbox strikes through the sibling paragraph. The CSS responsible for that -</p>

<div class="codehilite"><pre><span></span><code><span class="nt">input</span><span class="p">:</span><span class="nd">checked</span> <span class="o">+</span> <span class="nt">p</span> <span class="p">{</span>
  <span class="k">background</span><span class="p">:</span> <span class="mh">#f9f9f9</span><span class="p">;</span>
  <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">line-through</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<hr />

<p>Now let's get on with our JS bits! At a high level we have the following steps -</p>

<ol>
<li>Keep track of the latest checked</li>
<li>See if shift is being clicked</li>
<li>If shift is clicked, run through the list of items and check everything in between</li>
</ol>

<h2>Keep track of latest checked</h2>

<p>We'll track the latest checked in <code>lastChecked</code>, everytime there is a click on a checkbox we'll update the <code>lastChecked</code>.</p>

<div class="codehilite"><pre><span></span><code><span class="kr">const</span> <span class="nx">checkboxes</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.inbox input[type=&quot;checkbox&quot;]&#39;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nx">lastChecked</span>

<span class="kd">function</span> <span class="nx">handleCheck</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">lastChecked</span> <span class="o">=</span> <span class="k">this</span>
<span class="p">}</span>

<span class="nx">checkboxes</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">checkbox</span> <span class="p">=&gt;</span> <span class="nx">checkbox</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">handleCheck</span><span class="p">))</span>
</code></pre></div>

<h2>Check for shift</h2>

<p>We need to check for shift because only if shift is pressed do we want to do a group check of checkboxes.</p>

<div class="codehilite"><pre><span></span><code><span class="kd">function</span> <span class="nx">handleCheck</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">//check if shift key was pressed </span>
  <span class="c1">// and that the checkbox is checked</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">shiftKey</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//logic goes here</span>
  <span class="p">}</span>

  <span class="c1">// the logic comes before updating last check as we don&#39;t want to </span>
  <span class="c1">//   overwrite the variable before using it</span>
  <span class="nx">lastChecked</span> <span class="o">=</span> <span class="k">this</span>
<span class="p">}</span>
</code></pre></div>

<h2>Run through the list of items</h2>

<p>Now we need to loop through all the items in the inbox until we hit the <code>lastChecked</code> checkbox or the checkbox currently being clicked. If we hit <code>lastChecked</code> first, then we need to continue checking all boxes till we encounter the current box. If we come across the current box first, then we check until we hit <code>lastChecked</code>. Either way we need to check all items in between <code>lastChecked</code> and the current item.</p>

<div class="codehilite"><pre><span></span><code><span class="kd">function</span> <span class="nx">handleCheck</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">shiftKey</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">inBetween</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="nx">checkboxes</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">cb</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">cb</span> <span class="o">===</span> <span class="k">this</span> <span class="o">||</span> <span class="nx">cb</span> <span class="o">===</span> <span class="nx">lastChecked</span><span class="p">)</span> <span class="nx">inBetween</span> <span class="o">=</span> <span class="o">!</span><span class="nx">inBetween</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">inBetween</span><span class="p">)</span> <span class="nx">cb</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="p">})</span>
  <span class="p">}</span>

  <span class="nx">lastChecked</span> <span class="o">=</span> <span class="k">this</span>
<span class="p">}</span>
</code></pre></div>

<p>We use <code>inBetween</code> to keep track of whether the current element in the loop is in between <code>this</code> and <code>lastChecked</code>.</p>

<p>The codepen with the final code</p>

<iframe height='549' scrolling='no' title='JS30-10-select-checkbox-b' src='//codepen.io/deepakkarki/embed/oyqoqp/?height=549&theme-id=dark&default-tab=js,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/deepakkarki/pen/oyqoqp/'>JS30-10-select-checkbox-b</a> by Deepak Karki (<a href='https://codepen.io/deepakkarki'>@deepakkarki</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>

<hr />

<p><strong>NOTE</strong> I know there are certain "bugs" in the code (same as Wes Bos's). </p>

<ul>
<li>Check something, uncheck it and then shift check another box, everything inbetween is still checked.</li>
<li>shift+check the very first time you're clicking a box, everything till the end is checked as well.</li>
</ul>

<p>To tackle these wouldn't be too hard code wise, but I let it be. It is going to be hard user flow wise. Since I don't really have an end user, there isn't much point rationalising how this should look if it were perfect. Hence my decision to leave it as it is.</p>

    </section>

    <section class="bpost-email-footer">
      <div class="blog-email-signup">

  <h2> STAY UPDATED </h2>

  <p class="signup-msg">
    Join 5000+ fellow software engineers and keep up with the top engineering content from companies all over the world. Carefully handpicked and delivered to your mailbox every week!<br>
  </p>

  <form action="https://discoverdev.us16.list-manage.com/subscribe/post" method="POST">
    <input type="hidden" name="u" value="c32352dc58bef5cdd7821a012">
    <input type="hidden" name="id" value="6aab40a607">
    
    <input type="email" autocapitalize="off" autocorrect="off" name="MERGE0" id="MERGE0" class="email" size="25" placeholder="Email" value="">
    <input type="submit" value="Subscribe">
  </form>

  <p class="privacy-msg">We take your time and privacy seriously - we don't spam or share your email. Unsubscribe anytime.</p>
</div>
    </section>
  </article>

  <aside class="bpost-email">
    <div class="blog-email-signup">

  <h2> STAY UPDATED </h2>

  <p class="signup-msg">
    Join 5000+ fellow software engineers and keep up with the top engineering content from companies all over the world. Carefully handpicked and delivered to your mailbox every week!<br>
  </p>

  <form action="https://discoverdev.us16.list-manage.com/subscribe/post" method="POST">
    <input type="hidden" name="u" value="c32352dc58bef5cdd7821a012">
    <input type="hidden" name="id" value="6aab40a607">
    
    <input type="email" autocapitalize="off" autocorrect="off" name="MERGE0" id="MERGE0" class="email" size="25" placeholder="Email" value="">
    <input type="submit" value="Subscribe">
  </form>

  <p class="privacy-msg">We take your time and privacy seriously - we don't spam or share your email. Unsubscribe anytime.</p>
</div>
  </aside>

</div>


</main>


<footer>
  <p class="msg">Made with <b style="font-size:20px;"> &hearts;</b> by a group of nerds on Earth!</p>
  <p class="copyright">© Copyright 2018 Discoverdev.io</p>
</footer>
<div class="ghost-footer"></div>
</body>
</html>